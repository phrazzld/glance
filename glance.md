## Technical Overview: /Users/phaedrus/Development/glance

This project, residing in the `/Users/phaedrus/Development/glance` directory, is a Go application designed to recursively generate concise technical overviews (in Markdown format) for code directories.  It leverages Google Gemini's large language model to produce summaries incorporating file contents and subdirectory overviews.

**1. High-Level Purpose and Architecture:**

The `glance` application analyzes a given directory's structure and contents.  It recursively traverses subdirectories, gathers relevant information (file contents, subdirectory summaries), constructs a prompt for the Gemini API, and generates a `glance.md` file in each directory containing a technical overview. The process prioritizes deeper subdirectories first, allowing higher-level overviews to incorporate lower-level summaries. The application uses a progress bar to track generation progress.

**2. Key File Roles:**

* **`.git/*`:** Standard Git repository metadata.  The `hooks` subdirectory contains several sample Git hooks;  `pre-push`, `prepare-commit-msg`, and `update` are notable examples demonstrating custom commit message validation and tag/branch protection.  These are *not currently enabled* within this repository, only provided as examples.
* **`go.mod` and `go.sum`:**  Go module files defining project dependencies (including `google.golang.org/api`, `github.com/google/generative-ai-go`, logging, progress bar, and environment loading libraries).
* **`glance.go`:** The main Go source code file implementing the application logic.  This handles command-line argument parsing, directory traversal, Gemini API interaction,  file content gathering, and Markdown file generation. `.gitignore` integration helps prevent unwanted files from being processed.


**3. Major Dependencies or Patterns:**

* **Google Gemini AI API:**  The core functionality relies on the Gemini API (`github.com/google/generative-ai-go`) for generating technical overviews from structured prompts.  Requires the `GEMINI_API_KEY` environment variable.
* **Go Modules:** The project utilizes Go modules for dependency management.
* **`gitignore` package:**  This package provides functionality to respect the `.gitignore` rules of the analyzed directories.
* **Error Handling:** The code employs robust error handling throughout, logging warnings and fatal errors appropriately.
* **Progress Bar:** The `progressbar/v3` package provides user feedback during the recursive processing of directories.
* **Logging:** `logrus` provides structured and colorized logging, aiding in debugging.

**4. Implementation Details:**

The application uses a breadth-first search approach (modified to process subdirectories before parent directories). Each directory's `glance.md` file includes a summary generated by Gemini, encompassing a specified structure of technical details and a list of local file contents (truncated to 5MB to avoid excessively long prompts).


**5. Special Gotchas or Constraints:**

* **API Key:**  The application requires the `GEMINI_API_KEY` environment variable to be set; failure to do so will result in a fatal error.
* **Gemini API Usage:** Usage is subject to the Gemini API's rate limits and terms of service.  High-volume usage may require handling rate limiting explicitly.
* **Large Files:**  Very large files (over ~5MB) are truncated in the prompt to prevent exceeding API limitations.  A more sophisticated solution might involve chunking or summarization of these files before sending them to the API.
* **`gitignore` Limitations:** The `.gitignore` processing assumes standard `.gitignore` syntax but may not handle edge cases perfectly.
* **External Dependencies:** The code's functionality is heavily reliant on external APIs (Gemini) and packages.  Any downtime or changes to these services may directly affect this application.  More sophisticated error handling for transient issues might be beneficial.
* **Sample Git Hooks:** The sample Git hooks are illustrative only. They should be carefully reviewed and adapted as needed before enabling them in a production repository.


This overview provides a comprehensive guide for developers working with the `glance` project. Further investigation of the source code may be necessary for deeper understanding of specific implementation details.
